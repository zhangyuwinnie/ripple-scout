这份设计文档将你的“全栈开发能力”与“Physical AI 的工程思维”相结合。我们不只是在写一个股票脚本，而是在构建一个**具有感知能力的工业级监控系统**。

---

# ## 项目名称：Ripple Scout v1.0

**核心使命：** 通过捕捉产业链上游的“能量溢出”（Capex/订单），定位下游处于“蓄势状态”（VCP/缩量）的二线标的，实现确定性极高的非对称投资。

---

## ### 1. 系统架构设计 (System Architecture)

系统采用模块化分层设计，确保数据的“低耦合”与信号的“高敏感”。

* **L1: 信号感知层 (Upstream Radar):** 负责抓取 Capex、财报、月度营收、现货价格等前瞻指标。
* **L2: 关联映射层 (Linkage Engine):** 维护一个基于 Supply Chain 的知识图谱，将巨头（如 ）的动作映射到候选人（Candidate）。
* **L3: 模式识别层 (Pattern Matcher):** 对 Candidate 执行 VCP 压缩算法、RSI 极值检测及成交量异动扫描。
* **L4: 决策告警层 (Alerting Hub):** 根据多维分值触发日终推送，标记“进场/出货”拐点。

---

## ### 2. 技术规格说明 (Technical Specification)

### #### A. 上游信号捕获 (The Lead Signal)

为了解决数据滞后问题，我们定义 **“合成 Capex 信号”**：

1. **静态数据：** 自动化解析 SEC Filings（10-Q/10-K）中的 `Purchase Obligations`。
2. **动态数据：** * **月度营收：** 监控台积电 (TSM)、联电 (UMC) 等代工厂每月 10 号公布的营收同比 (YoY)。
* **现货报价：** 抓取 TrendForce 或相关行业协会的公开现货价格指数。


3. **计算公式：** 


*(其中  为根据历史敏感度设定的权重)*

### #### B. 下游 VCP 检测算法 (The Contraction Logic)

这是捕捉  爆发前的核心。我们要检测的是“筹码的绝对锁定”。

1. **波动压缩率 ():** 计算连续三个震荡波段的振幅（T1, T2, T3）。


2. **紧凑度指标 ():** 在 VCP 末端，计算过去 10 天的收盘价标准差。



*(意味着波动率收缩至 2% 以内)*

### #### C. “苗头”识别指标 (The Spark Indicator)

当标的满足以下所有条件时，系统触发 **“进场警报”**：

* **能量积蓄：**  且  (贴线运行)。
* **量价背离：** 股价平稳（跌幅 < 1%），但成交量  (悄悄建仓)。
* **突破瞬间：**  且当日成交量大于前 10 日均值的 2 倍。

---

## ### 3. 实施蓝图 (Implementation Roadmap)

| 阶段 | 核心任务 | 全栈实现要点 |
| --- | --- | --- |
| **Phase 1: 扫描引擎** | 开发基于 `yfinance` 的 VCP 与 RSI 过滤器。 | 编写高并发 Ticker 扫描脚本（Threading/Async）。 |
| **Phase 2: 知识图谱** | 建立 `Core12_Neighbors.json` 映射表。 | 利用 LLM 自动提取供应商关系并构建层级 JSON。 |
| **Phase 3: 信号聚合** | 接入 Capex 与月度营收数据的爬虫。 | 自动化解析 SEC EDGAR 的 XML 报表数据。 |
| **Phase 4: 可视化** | 搭建 Streamlit Dashboard。 | 实现“涟漪视图”：点击  自动高亮相关 Candidate。 |

---

## ### 4. 细节问题的深度建议

1. **关于 Candidate 列表：** 不用担心列表过大。你可以建立一个 **“二线标的动态备选库”**：
* **入库标准：** 凡是出现在 12 只核心股财报“供应商”名单，且市值在 $10 亿 - $100 亿之间的，自动入库。
* **清理标准：** 3 个月内无成交量异动且跌破 200 日线的，自动移除。这样能保证系统始终关注最活跃的“涟漪”。


2. **关于技术触顶：**
引入 **“对冲止盈逻辑”**：
* 当  且  时，系统强制标记 **“Reduce Exposure”**。
* 这能让你在市场疯狂（如最近的 ）时，理智地拿回本金。



